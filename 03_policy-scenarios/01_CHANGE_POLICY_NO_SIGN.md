# Change a Policy without Signature

### Goal:
- User can not update a policy deployed in an ACM Hub/Managed Clusters without a proper signature  attached.

### Prerequisite: 
- Policy collection is already clone locally in signing host as described in [doc](../prerequisite-setup/GIT_CLONE_POLICY_COLLECTION.md)
- IShield protection is enabled as described in [doc](../install-scenarios/DEPLOY_ISHIELD.md), if you have not done yet.
 
### Action Steps:

Complete the following three steps:

1. Go to the directory of your cloned policy collection Git repository in the signing host

   [Command]
   ```
   cd <SIGING HOST DIR>/policy-collection
   ```
   
   
2. Edit the policy file `community/SC-System-and-Communications-Protection/policy-ocp4-certs.yaml`
   
   In line 52, change `minimumDuration` from `400h` to `500h`

   [Result]
   ```
   cat community/SC-System-and-Communications-Protection/policy-ocp4-certs.yaml| grep minimumDuration | head -n 1
   500h
   ```
   
3. Commit your changes in policy-ocp4-certs.yaml to your cloned policy-collection git repository.

   [Command]
   ```
   git add community/SC-System-and-Communications-Protection/policy-ocp4-certs.yaml
   git commit -m 'policy-ocp4-certs.yaml with out signature'
   git push origin master
   ```
   
 
   
### Expected Result:

Above changes in Git repository will be synced by ACM Hub Cluster to update the changes in policy.  
After a minute, continue to check the expected results.
    
[WebConsle-HUB]

1. Connect to ACM Hub Cluster WebConsole and go to polices page.
2. Search for `policy-integrity-shield-events`  in Find Policies.  
3. Click  `policy-integrity-shield-events`  policy. 
4. Check if  policy-integrity-shield-events  is in violation state (Cluster violation -> red) as show below.
     
  ![Policy Violation](../images/policy-integrity-shield-status-violation.PNG)
    
5. Click  status tab in `policy-integrity-shield-events`  policy page and confirm the violation as below:
    
  ![Policy Violation Status](../images/policy-integrity-shield-status-violation-statys.PNG) 
  
6. Click  View details link in the violation entry listed and check details page for violations message as below.
  
  ![Policy Violation Status Detail](../images/policy-integrity-shield-status-violation-status-detail.PNG)  
   
[OC-MANAGED]

7. Check IShield block events in via OC commands in the ACM Managed Cluster.

   Run the following command to see the blocking events generated by Integrity Shield.
   
   [Command]
   ```
   oc get events --all-namespaces  --field-selector type=IntegrityShield
   ```
   
   [Result]
   
   ![Block Events](../images/ishield-log.PNG)
